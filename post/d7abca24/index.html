<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>研究笔记-第4周 | DEAL-II-Fluid</title><meta name="robots" content="noindex"><meta name="description" content="环境已经完全搭建好，开始深入研究gmsh和getdp代码  getdp（“General environment for the treatment of Discrete Problems”)   -\nabla(\epsilon \nabla \cdot v) &#x3D; \rho\\\\ boundary: v_e &#x3D;1\\\\ v_g &#x3D; 0弱解形式：  (-\nabla(\epsilon \n"><meta name="keywords" content="FEM"><meta name="author" content="Jiaqi"><meta name="copyright" content="Jiaqi"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://deal-ii.com/post/d7abca24/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><meta property="og:type" content="article"><meta property="og:title" content="研究笔记-第4周"><meta property="og:url" content="http://deal-ii.com/post/d7abca24/"><meta property="og:site_name" content="DEAL-II-Fluid"><meta property="og:description" content="环境已经完全搭建好，开始深入研究gmsh和getdp代码  getdp（“General environment for the treatment of Discrete Problems”)   -\nabla(\epsilon \nabla \cdot v) &#x3D; \rho\\\\ boundary: v_e &#x3D;1\\\\ v_g &#x3D; 0弱解形式：  (-\nabla(\epsilon \n"><meta property="og:image" content="https://i.loli.net/2021/01/01/XuCqjioRr6mxPQn.png"><meta property="article:published_time" content="2020-01-28T02:58:33.000Z"><meta property="article:modified_time" content="2021-02-06T03:30:21.177Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2021-02-06 11:30:21'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/css/flink.min.css"><link rel="stylesheet" href="/gitcalendar/css/gitcalendar.css"/><meta name="generator" content="Hexo 5.3.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/Jiaqi-knight/imgBase@main/me.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">24</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">32</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">14</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 索引</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/x-swirlflow/"><i class="fa-fw fa fa-book"></i><span> swirlflow</span></a></li><li><a class="site-page" href="/x-codepen/"><i class="fa-fw fa fa-magic"></i><span> codepen</span></a></li><li><a class="site-page" href="/x-gallery/"><i class="fa-fw fa fa-beer"></i><span> gallery</span></a></li><li><a class="site-page" href="/x-shadertoy/"><i class="fa-fw fa fa-star"></i><span> shadertoy</span></a></li><li><a class="site-page" href="/x-webgl1/"><i class="fa-fw fa fa-camera-retro"></i><span> webgl1</span></a></li><li><a class="site-page" href="/x-webgl2/"><i class="fa-fw fa fa-camera-retro"></i><span> webgl2</span></a></li><li><a class="site-page" href="/x-markdown/"><i class="fa-fw fa fa-tree"></i><span> Vditor</span></a></li><li><a class="site-page" href="/x-DNN/"><i class="fa-fw fa fa-heartbeat"></i><span> DNN</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Modern-Cmake"><span class="toc-number">1.</span> <span class="toc-text">Modern Cmake:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tracing-a-run"><span class="toc-number">2.</span> <span class="toc-text">Tracing a run</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Watching-a-build"><span class="toc-number"></span> <span class="toc-text">Watching a build</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#C-debugging"><span class="toc-number"></span> <span class="toc-text">C++ debugging</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Debug-example"><span class="toc-number"></span> <span class="toc-text">Debug example</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%9C%85%E4%BB%BB%E5%8A%A12-%E6%9C%80%E5%88%9D%E7%9A%84getdp%E7%89%88%E6%9C%AC-0-75-%E7%94%9F%E6%88%90%E5%BA%93%E6%96%87%E4%BB%B6%E3%80%82"><span class="toc-number"></span> <span class="toc-text">✅任务2: 最初的getdp版本-0.75 生成库文件。</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%BA%93%E4%B8%8E%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%E5%BA%93%EF%BC%8D%EF%BC%8D%EF%BC%8D%EF%BC%8DC-C"><span class="toc-number">1.</span> <span class="toc-text">静态链接库与动态链接库－－－－C&#x2F;C++</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number"></span> <span class="toc-text"> </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#g-gcc-%E7%BC%96%E8%AF%91%E9%80%89%E9%A1%B9"><span class="toc-number"></span> <span class="toc-text">g++(gcc)编译选项</span></a></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2021/01/01/XuCqjioRr6mxPQn.png)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">DEAL-II-Fluid</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 索引</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/x-swirlflow/"><i class="fa-fw fa fa-book"></i><span> swirlflow</span></a></li><li><a class="site-page" href="/x-codepen/"><i class="fa-fw fa fa-magic"></i><span> codepen</span></a></li><li><a class="site-page" href="/x-gallery/"><i class="fa-fw fa fa-beer"></i><span> gallery</span></a></li><li><a class="site-page" href="/x-shadertoy/"><i class="fa-fw fa fa-star"></i><span> shadertoy</span></a></li><li><a class="site-page" href="/x-webgl1/"><i class="fa-fw fa fa-camera-retro"></i><span> webgl1</span></a></li><li><a class="site-page" href="/x-webgl2/"><i class="fa-fw fa fa-camera-retro"></i><span> webgl2</span></a></li><li><a class="site-page" href="/x-markdown/"><i class="fa-fw fa fa-tree"></i><span> Vditor</span></a></li><li><a class="site-page" href="/x-DNN/"><i class="fa-fw fa fa-heartbeat"></i><span> DNN</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">研究笔记-第4周</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-01-28 10:58:33"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-01-28</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2021-02-06 11:30:21"><i class="fas fa-history fa-fw"></i> 更新于 2021-02-06</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/FEM/">FEM</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><ul>
<li>环境已经完全搭建好，开始深入研究gmsh和getdp代码</li>
</ul>
<p>getdp（“General environment for the treatment of Discrete Problems”)</p>
<p><img src= "/img/loading.gif" data-src="http://getdp.info/doc/texinfo/objects-wrap.jpg" alt="objects-wrap"></p>
<script type="math/tex; mode=display">
-\nabla(\epsilon \nabla \cdot v) = \rho\\\\
boundary: v_e =1\\\\
v_g = 0</script><p>弱解形式：</p>
<script type="math/tex; mode=display">
(-\nabla(\epsilon \nabla \cdot v) , v')_{e} = 0</script><p>Green’s identity</p>
<script type="math/tex; mode=display">
(\epsilon \nabla \cdot v, \nabla \cdot v')_e - (n . (\epsilon \nabla \cdot v), v')_b = 0</script><p>边界一致，简化为：</p>
<script type="math/tex; mode=display">
(\epsilon \nabla \cdot v, \nabla \cdot v')_e=0</script><p>代入 Galerkin：</p>
<script type="math/tex; mode=display">
   v(x,y) = \sum_k v_{n_k} s_{n_k}(x,y)</script><p>任务1: 编译并调试算例1</p>
<p>从最基础的源码开始调试研究。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">68.183.109.156:80&#x2F;gmsh&#x2F;gmsh-jenkins   arm64_gmsh   95fb90b2d558   2 days ago   4.54GB</span><br><span class="line">68.183.109.156:80&#x2F;gmsh&#x2F;gmsh-jenkins   gmsh_arm64   95fb90b2d558   2 days ago   4.54GB</span><br><span class="line">这两个镜像是用来做测试用的，区别gmsh_arm64： make install gmsh</span><br><span class="line"></span><br><span class="line">docker save 95fb90b2d558 &gt; xxx.tar #备份镜像</span><br><span class="line">docker load &lt; xxx.tar #备份镜像</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard 54728669d8b44af343f3b4c8d19073f3132d3470 #0.75版本</span><br><span class="line">make debug</span><br></pre></td></tr></table></figure>
<h3 id="Modern-Cmake"><a href="#Modern-Cmake" class="headerlink" title="Modern Cmake:"></a>Modern Cmake:</h3><p><em>“Everything that is needed to (successfully) build that target.”</em></p>
<ul>
<li><p>source-files</p>
</li>
<li><p>include search-paths</p>
</li>
<li><p>pre-processor macros</p>
</li>
<li><p>link-dependencies</p>
</li>
<li><p>compiler/linker-options</p>
</li>
<li><p>compiler/linker-features</p>
<ul>
<li>(e.g. support for a C++-standard)</li>
</ul>
</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">01</span> <span class="comment"># Adding build-requirements</span></span><br><span class="line"><span class="number">02</span></span><br><span class="line"><span class="number">03</span> <span class="keyword">target_include_directories</span>( &lt;<span class="keyword">target</span>&gt; PRIVATE &lt;<span class="keyword">include</span>-search-dir&gt;... )</span><br><span class="line"><span class="number">04</span> <span class="keyword">target_compile_definitions</span>( &lt;<span class="keyword">target</span>&gt; PRIVATE &lt;<span class="keyword">macro</span>-definitions&gt;... )</span><br><span class="line"><span class="number">05</span> <span class="keyword">target_compile_options</span>( &lt;<span class="keyword">target</span>&gt; PRIVATE &lt;compiler-<span class="keyword">option</span>&gt;... )</span><br><span class="line"><span class="number">06</span> <span class="keyword">target_compile_features</span>( &lt;<span class="keyword">target</span>&gt; PRIVATE &lt;feature&gt;... )</span><br><span class="line"><span class="number">07</span> <span class="keyword">target_sources</span>( &lt;<span class="keyword">target</span>&gt; PRIVATE &lt;source-<span class="keyword">file</span>&gt;... )</span><br><span class="line"><span class="number">08</span> <span class="keyword">target_link_libraries</span>( &lt;<span class="keyword">target</span>&gt; PRIVATE &lt;dependency&gt;... )</span><br><span class="line"><span class="number">09</span> <span class="keyword">target_link_options</span>( &lt;<span class="keyword">target</span>&gt; PRIVATE &lt;linker-<span class="keyword">option</span>&gt;... )</span><br><span class="line"><span class="number">10</span> <span class="keyword">target_link_directories</span>( &lt;<span class="keyword">target</span>&gt; PRIVATE &lt;linker-search-dir&gt;... )</span><br></pre></td></tr></table></figure>
<p><em>“Everything that is needed to (successfully) use that target.”</em></p>
<p>“As a dependency of another target.”</p>
<ul>
<li><p>source-files</p>
<ul>
<li>(but normally not)</li>
</ul>
</li>
<li><p>include search-paths</p>
</li>
<li><p>pre-processor macros</p>
</li>
<li><p>link-dependencies</p>
</li>
<li><p>compiler/linker-options</p>
</li>
<li><p>compiler/linker-features</p>
<ul>
<li>(e.g. support for a C++-standard)</li>
</ul>
</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">01</span> <span class="comment"># Adding usage-requirements</span></span><br><span class="line"><span class="number">02</span></span><br><span class="line"><span class="number">03</span> <span class="keyword">target_include_directories</span>( &lt;<span class="keyword">target</span>&gt; INTERFACE &lt;<span class="keyword">include</span>-search-dir&gt;... )</span><br><span class="line"><span class="number">04</span> <span class="keyword">target_compile_definitions</span>( &lt;<span class="keyword">target</span>&gt; INTERFACE &lt;<span class="keyword">macro</span>-definitions&gt;... )</span><br><span class="line"><span class="number">05</span> <span class="keyword">target_compile_options</span>( &lt;<span class="keyword">target</span>&gt; INTERFACE &lt;compiler-<span class="keyword">option</span>&gt;... )</span><br><span class="line"><span class="number">06</span> <span class="keyword">target_compile_features</span>( &lt;<span class="keyword">target</span>&gt; INTERFACE &lt;feature&gt;... )</span><br><span class="line"><span class="number">07</span> <span class="keyword">target_sources</span>( &lt;<span class="keyword">target</span>&gt; INTERFACE &lt;source-<span class="keyword">file</span>&gt;... )</span><br><span class="line"><span class="number">08</span> <span class="keyword">target_link_libraries</span>( &lt;<span class="keyword">target</span>&gt; INTERFACE &lt;dependency&gt;... )</span><br><span class="line"><span class="number">09</span> <span class="keyword">target_link_options</span>( &lt;<span class="keyword">target</span>&gt; INTERFACE &lt;linker-<span class="keyword">option</span>&gt;... )</span><br><span class="line"><span class="number">10</span> <span class="keyword">target_link_directories</span>( &lt;<span class="keyword">target</span>&gt; INTERFACE &lt;linker-search-dir&gt;... )</span><br></pre></td></tr></table></figure>
<p><em>上述两者结合</em></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">01</span> <span class="comment"># Adding build- and usage-requirements</span></span><br><span class="line"><span class="number">02</span></span><br><span class="line"><span class="number">03</span> <span class="keyword">target_include_directories</span>( &lt;<span class="keyword">target</span>&gt; PUBLIC &lt;<span class="keyword">include</span>-search-dir&gt;... )</span><br><span class="line"><span class="number">04</span> <span class="keyword">target_compile_definitions</span>( &lt;<span class="keyword">target</span>&gt; PUBLIC &lt;<span class="keyword">macro</span>-definitions&gt;... )</span><br><span class="line"><span class="number">05</span> <span class="keyword">target_compile_options</span>( &lt;<span class="keyword">target</span>&gt; PUBLIC &lt;compiler-<span class="keyword">option</span>&gt;... )</span><br><span class="line"><span class="number">06</span> <span class="keyword">target_compile_features</span>( &lt;<span class="keyword">target</span>&gt; PUBLIC &lt;feature&gt;... )</span><br><span class="line"><span class="number">07</span> <span class="keyword">target_sources</span>( &lt;<span class="keyword">target</span>&gt; PUBLIC &lt;source-<span class="keyword">file</span>&gt;... )</span><br><span class="line"><span class="number">08</span> <span class="keyword">target_link_libraries</span>( &lt;<span class="keyword">target</span>&gt; PUBLIC &lt;dependency&gt;... )</span><br><span class="line"><span class="number">09</span> <span class="keyword">target_link_options</span>( &lt;<span class="keyword">target</span>&gt; PUBLIC &lt;linker-<span class="keyword">option</span>&gt;... )</span><br><span class="line"><span class="number">10</span> <span class="keyword">target_link_directories</span>( &lt;<span class="keyword">target</span>&gt; PUBLIC &lt;linker-search-dir&gt;... )</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cmake -S . -B build</span><br><span class="line">cmake --build build</span><br><span class="line">cmake --build build --target test</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cmake --build build -v</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://hsf-training.github.io/hsf-training-cmake-webpage/08-debugging/index.html">cmake debug</a></p>
<h3 id="Tracing-a-run"><a href="#Tracing-a-run" class="headerlink" title="Tracing a run"></a>Tracing a run</h3><p>Have you wanted to watch exactly what happens in your CMake file, and when? The <code>--trace-source=&quot;filename&quot;</code> feature is fantastic. Every line run in the file that you give will be echoed to the screen when it is run, letting you follow exactly what is happening. There are related options as well, but they tend to bury you in output.</p>
<blockquote>
<h2 id="Watching-a-build"><a href="#Watching-a-build" class="headerlink" title="Watching a build"></a>Watching a build</h2><p>Let’s try this out. Let’s go to the <a target="_blank" rel="noopener" href="https://hsf-training.github.io/hsf-training-cmake-webpage/08-debugging/index.html"><code>code/04-debug</code></a> folder and configure with trace mode on:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake -S . -B build --trace-source&#x3D;CMakeLists.txt</span><br></pre></td></tr></table></figure>
<p>Try adding <code>--trace-expand</code> too. What is the difference? How about replacing <code>--trace-source=CMakeLists.txt</code> with <code>--trace</code>?</p>
</blockquote>
<h1 id="C-debugging"><a href="#C-debugging" class="headerlink" title="C++ debugging"></a>C++ debugging</h1><p>To run a C++ debugger, you need to set several flags in your build. CMake does this for you with “build types”. You can run CMake with <code>CMAKE_BUILD_TYPE=Debug</code> for full debugging, or <code>RelWithDebInfo</code> for a release build with some extra debug info. You can also use <code>Release</code> for an optimized release build, or <code>MinSizeRel</code> for a minimum size release (which I’ve never used).</p>
<h2 id="Debug-example"><a href="#Debug-example" class="headerlink" title="Debug example"></a>Debug example</h2><details style="box-sizing: border-box; display: block;"><summary style="box-sizing: border-box; display: block;">C++ code (click to expand)</summary></details>

<p>Let’s try it. Go to <code>code/04-debug</code>, and build in debug mode. Our program has a bug. Let’s try it out in a debugger.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cmake -S . -B build-debug -DCMAKE_BUILD_TYPE&#x3D;Debug</span><br><span class="line">cmake --build build-debug</span><br><span class="line">gdb build-debug&#x2F;simple_example</span><br></pre></td></tr></table></figure>
<p>Now, since we think there’s a problem in <code>my_sin</code>, let’s set a breakpoint in <code>my_sin</code>. Note that I’m providing the gdb commands on the left, and lldb commands on the right.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># GDB                # LLDB</span><br><span class="line">break my_sin         breakpoint set --name my_sin</span><br><span class="line">r                    r</span><br></pre></td></tr></table></figure>
<p>Now, let’s watch what happens to the sign variable. Set a watchpoint:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># GDB                # LLDB</span><br><span class="line">watch sign           watchpoint set variable sign</span><br><span class="line">c                    c</span><br></pre></td></tr></table></figure>
<p>Keep running continue (<code>c</code>). Do you see the problem?</p>
<p>getdp</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake -DENABLE_MPI&#x3D;1</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cmake -S . -B build-debug1 -DCMAKE_BUILD_TYPE&#x3D;Debug -DENABLE_MPI&#x3D;1</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>✅任务1:可以进行getdp调试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gdb</span><br><span class="line">file getdp</span><br><span class="line">start ..&#x2F;demos&#x2F;magnet.pro</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">Problem_S.Group             &#x3D; NULL ;</span><br><span class="line">Problem_S.Expression        &#x3D; NULL ;</span><br><span class="line">Problem_S.FunctionSpace     &#x3D; NULL ;</span><br><span class="line">Problem_S.Constraint        &#x3D; NULL ;</span><br><span class="line">Problem_S.Formulation       &#x3D; NULL ;</span><br><span class="line">Problem_S.JacobianMethod    &#x3D; NULL ;</span><br><span class="line">Problem_S.IntegrationMethod &#x3D; NULL ;</span><br><span class="line">Problem_S.Resolution        &#x3D; NULL ;</span><br><span class="line">Problem_S.PostProcessing    &#x3D; NULL ;</span><br><span class="line">Problem_S.PostOperation     &#x3D; NULL ;</span><br><span class="line"></span><br><span class="line">Current.Name &#x3D; NULL;</span><br><span class="line">Current.NbrSystem &#x3D; 0;</span><br><span class="line">Current.DefineSystem_P &#x3D; NULL ;</span><br><span class="line">Current.DofData_P0 &#x3D; NULL;</span><br><span class="line">Current.DofData &#x3D; NULL;</span><br><span class="line">Current.GeoData &#x3D; NULL;</span><br><span class="line">Current.PostOpData_L &#x3D; NULL;</span><br><span class="line">Current.PostOpDataIndex &#x3D; 0;</span><br><span class="line">Current.NbrHar &#x3D; 0;</span><br><span class="line">Current.Region &#x3D; 0;</span><br><span class="line">Current.SubRegion &#x3D; 0;</span><br><span class="line">Current.NumEntity &#x3D; 0;</span><br><span class="line">Current.NumEntityInElement &#x3D; 0;</span><br><span class="line">Current.NumEntities[0] &#x3D; 0;</span><br><span class="line">Current.Element &#x3D; NULL;</span><br><span class="line">Current.IntegrationSupportIndex &#x3D; 0;</span><br><span class="line">Current.ElementSource &#x3D; 0;</span><br><span class="line">Current.SourceIntegrationSupportIndex &#x3D; 0;</span><br><span class="line">Current.TypeTime &#x3D; 0;</span><br><span class="line">Current.TypeAssembly &#x3D; 0;</span><br><span class="line">Current.SubTimeStep &#x3D; 0;</span><br><span class="line">Current.flagAssDiag &#x3D; 0;</span><br><span class="line">Current.x &#x3D; 0.0;</span><br><span class="line">Current.y &#x3D; 0.0;</span><br><span class="line">Current.z &#x3D; 0.0;</span><br><span class="line">Current.u &#x3D; 0.0;</span><br><span class="line">Current.v &#x3D; 0.0;</span><br><span class="line">Current.w &#x3D; 0.0;</span><br><span class="line">Current.xs &#x3D; 0.0;</span><br><span class="line">Current.ys &#x3D; 0.0;</span><br><span class="line">Current.zs &#x3D; 0.0;</span><br><span class="line">Current.us &#x3D; 0.0;</span><br><span class="line">Current.vs &#x3D; 0.0;</span><br><span class="line">Current.ws &#x3D; 0.0;</span><br><span class="line">Current.a &#x3D; 0.0;</span><br><span class="line">Current.b &#x3D; 0.0;</span><br><span class="line">Current.c &#x3D; 0.0;</span><br><span class="line">Current.xp &#x3D; 0.0;</span><br><span class="line">Current.yp &#x3D; 0.0;</span><br><span class="line">Current.zp &#x3D; 0.0;</span><br><span class="line">Current.ut &#x3D; 0.0;</span><br><span class="line">Current.vt &#x3D; 0.0;</span><br><span class="line">Current.wt &#x3D; 0.0;</span><br><span class="line">Current.Val[0] &#x3D; 0.0;</span><br><span class="line">Current.QuadraturePointIndex &#x3D; 0.0;</span><br><span class="line">Current.Time &#x3D; 0.0;</span><br><span class="line">Current.TimeImag &#x3D; 0.0;</span><br><span class="line">Current.TimeStep &#x3D; 0.0;</span><br><span class="line">Current.DTime &#x3D; 0.0;</span><br><span class="line">Current.Theta &#x3D; 0.0;</span><br><span class="line">Current.Beta &#x3D; 0.0;</span><br><span class="line">Current.Gamma &#x3D; 0.0;</span><br><span class="line">Current.PredOrder &#x3D; 0.0;</span><br><span class="line">Current.CorrOrder &#x3D; 0.0;</span><br><span class="line">Current.aPredCoeff[0] &#x3D; 0.0;</span><br><span class="line">Current.aCorrCoeff[0] &#x3D; 0.0;</span><br><span class="line">Current.bCorrCoeff &#x3D; 0.0;</span><br><span class="line">Current.PredErrorConst &#x3D; 0.0;</span><br><span class="line">Current.CorrErrorConst &#x3D; 0.0;</span><br><span class="line">Current.Breakpoint &#x3D; 0.0;</span><br><span class="line">Current.Iteration &#x3D; 0.0;</span><br><span class="line">Current.Residual &#x3D; 0.0;</span><br><span class="line">Current.ResidualN &#x3D; 0.0; &#x2F;&#x2F;+++</span><br><span class="line">Current.Residual_Iter1 &#x3D; 1.0; &#x2F;&#x2F;+++</span><br><span class="line">Current.RelativeDifference &#x3D; 0.0;</span><br><span class="line">Current.RelativeDifferenceOld &#x3D; 0.0;</span><br><span class="line">Current.RelaxationFactor &#x3D; 0.0;</span><br><span class="line">Current.RelaxFac &#x3D; 0.0; &#x2F;&#x2F;+++</span><br><span class="line">Current.NbrTestedFac &#x3D; 0.0; &#x2F;&#x2F;+++</span><br><span class="line">Current.SolveJacAdaptFailed &#x3D; 0.0; &#x2F;&#x2F;+++</span><br><span class="line">Current.KSPIterations &#x3D; 0.0;</span><br><span class="line">Current.KSPIteration &#x3D; 0.0;</span><br><span class="line">Current.KSPResidual &#x3D; 0.0;</span><br><span class="line">Current.KSPSystemSize &#x3D; 0.0;</span><br></pre></td></tr></table></figure>
<p>设定：</p>
<ul>
<li><p>ubuntu-gmsh： 提前将gmsh和getdp安装好</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Installing: &#x2F;usr&#x2F;local&#x2F;bin&#x2F;getdp</span><br><span class="line">Installing: &#x2F;usr&#x2F;local&#x2F;bin&#x2F;gmsh</span><br></pre></td></tr></table></figure></li>
<li>Ubuntu-gmsh1: 未安装</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run --cap-add&#x3D;SYS_PTRACE --security-opt seccomp&#x3D;unconfined -i -t --name gmsh-wjq-03 95fb90b2d558 bash</span><br><span class="line">build gmsh only use make j1</span><br><span class="line">cmake -DENABLE_MPI&#x3D;1 ..</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">getdp</span><br><span class="line"></span><br><span class="line">git reset --hard 54728669d8b44af343f3b4c8d19073f3132d3470</span><br><span class="line"></span><br><span class="line">HEAD is now at 8011fc4c This commit was manufactured by cvs2svn to create tag &#39;getdp_0_761&#39;</span><br></pre></td></tr></table></figure>
<p><strong>gmsh-wjq-03</strong></p>
<h2 id="✅任务2-最初的getdp版本-0-75-生成库文件。"><a href="#✅任务2-最初的getdp版本-0-75-生成库文件。" class="headerlink" title="✅任务2: 最初的getdp版本-0.75 生成库文件。"></a>✅任务2: 最初的getdp版本-0.75 生成库文件。</h2><h3 id="静态链接库与动态链接库－－－－C-C"><a href="#静态链接库与动态链接库－－－－C-C" class="headerlink" title="静态链接库与动态链接库－－－－C/C++"></a>静态链接库与动态链接库－－－－C/C++</h3><p>　　平时我们写程序都必须include很多头文件，因为可以避免重复造轮子，软件大厦可不是单靠一个人就能完成的。但是你是否知道引用的那些头文件中的函数是怎么被执行的呢？这就要牵扯到链接库了！！！!</p>
<p>　　库有两种，一种是静态链接库，一种是动态链接库，不管是哪一种库，要使用它们，都要在程序中包含相应的include头文件。我们先来回顾一下程序编译的过程。如下图：</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdn.net/20151113153003874?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<p>我们结合gcc指令来看一下每个阶段生成的文件：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc <span class="operator">-</span>c helloWorld.c</span><br><span class="line">生成一个helloWorld.o文件，该文件是将源文件编译成的汇编文件，在链接之前，该文件不是可执行文件<span class="operator">。</span></span><br></pre></td></tr></table></figure>
<p>而</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gcc</span> <span class="string">-o helloWorld helloWorld.c</span></span><br></pre></td></tr></table></figure>
<p>生成的是一个helloWorld的执行文件，格式为ELF（与windows不一样）。该文件为链接后的可执行文件。</p>
<p>１．静态链接库</p>
<p>　　什么是静态链接呢？即在链接阶段，将源文件中用到的库函数与汇编生成的目标文件.o合并生成可执行文件。该可执行文件可能会比较大。</p>
<p>这种链接方式的好处是：方便程序移植，因为可执行程序与库函数再无关系，放在任何环境当中都可以执行。</p>
<p>缺点是：文件太大，一个全静态方式生成的简单print文件都有857K。而动态链接生成的一样的可执行文件却只要8.４Ｋ。</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdn.net/20151113155617515?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<p>文件内容很简单，就是一个printf(“hello world!\n”);</p>
<p>因为包含库文件stdio，所以静态编译出的文件很大。如果你想尝试的话，可以这样编译：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc <span class="operator">-</span><span class="keyword">static</span> <span class="operator">-</span>o print print.c</span><br></pre></td></tr></table></figure>
<p>在linux中，静态库为lib<em>.a，动态库为lib</em>.so。</p>
<p>下面我们来写一个库文件，然后生成一个静态库，然后尝试着调用一下它。</p>
<p>一个简单的add函数，头文件为</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdn.net/20151113161723948?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<p>头文件对于的源文件：</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdn.net/20151113161315604?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<p>下面我们来生成静态库：</p>
<p>输入：g++ -c add.cpp 生成.o目标文件</p>
<p>然后用ar命令进一步生成库libadd.a：</p>
<p>ar -crv libadd.a add.o</p>
<p>这样就生成了一个静态链接库libadd.a。</p>
<p><em>此时，add.cpp这个文件就没有用了。</em></p>
<p>下面我们来写一个测试文件：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;./addlib/add.h&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> number1 = <span class="number">10</span>；</span><br><span class="line">    <span class="keyword">int</span> number2 = <span class="number">90</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;the result is &quot;</span> &lt;&lt; add(number1, number2) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因为我的目录结构是add.cpp, addlib（文件夹），在addlib中是头文件和静态库，所以include用相对路径找到头文件add.h。</p>
<p>下面我们编译一下该文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ -o <span class="built_in">test</span> test.cpp -L./addlib -ladd</span><br></pre></td></tr></table></figure>
<p>－Ｌ是指定加载库文件的路径</p>
<p>－ｌ是指定加载的库文件。</p>
<p>运行一下：</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdn.net/20151113163717033?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<p>可见调用成功。</p>
<p>２．动态链接库</p>
<p>我们知道静态链接的话，文件会很大，往往实现很小的一个功能就需要占用很大的空间，而且每次库文件升级的话，都要重新编译源文件，很不方便。</p>
<p>具体下面如下：</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdn.net/20151113164127683?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<p>对于静态编译的程序１和程序２，都应用库staticMath。在内存中就又两份相同的staticＭath目标文件，很浪费空间，一旦程序数量过多就很可能会内存不足。</p>
<p>这么大的内存才只能运行这几个程序，实在不甘心。</p>
<p>这样就又了动态库发挥威力的地方了。我们来看看动态链接的结果：</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdn.net/20151113164444980?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<p>我们看到在这种模型中，两个程序只应用一个库，这个目标文件在内存中只有一份，供所有程序使用。</p>
<p>并且在程序运行过程中动态调用库文件，很方便，又不占空间，但是动态链接有一个缺点就是可移植性太差，如果两台电脑运行环境不同，动态库存放的位置不一样，很可能导致程序运行失败。</p>
<p>在具体的应用中，静态与动态应当合理选择！！！</p>
<p>下面我们来生成一个动态库：</p>
<p>输入：g++ -fPIC -shared -o libadd.so add.cpp</p>
<p>这样就生成了一个libadd.so的动态库。</p>
<p>下面我们用动态链接的方式编译test.cpp。</p>
<p>输入：g++ -o test test.cpp -L./addlib -ladd</p>
<p>该命令和刚刚静态链接一样。注意-l后面接的是lib与so中间的库名称。</p>
<p>我们执行一下：</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdn.net/20151113165606698?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<p>发现不行，因为执行程序找不到libadd.so。</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdn.net/20151113165800008?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<p>可以看到test执行程序用到的libadd.so没有找到。。。</p>
<p>原因是在/etc/ld.so.conf文件中设置了动态链接库了寻找路径。</p>
<p><img src= "/img/loading.gif" data-src="https://img-blog.csdn.net/20151113170206188?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p>
<p>可以看到有很多路径设置文件，在ld.so.conf.d中，我们在下面添加一下我们libadd.so的路径。</p>
<p>然后再执行一下ldconfig命令。</p>
<p>这下就可以成功执行test文件了。</p>
<p>注意一下，有人说为什么我程序中extern int number;可以直接编译不需要什么静态链接库，动态链接库。那是因为你在链接时已经将number变量定义的目标文件.o和源文件进行了链接，如：gcc -o main main.o test.o。如果你只是单纯的用main.o进行链接，是生成不了可执行目标文件的，如：gcc -o main main.ｃ会报告未定义的number引用。</p>
<p>综上说述，静态和动态链接库的选择要视情况而定。一般比较推荐动态链接方式，因为可以很好的节约内存，而且方便以后的库文件升级。</p>
<h2 id=""><a href="#" class="headerlink" title=" "></a> </h2><h2 id="g-gcc-编译选项"><a href="#g-gcc-编译选项" class="headerlink" title="g++(gcc)编译选项"></a>g++(gcc)编译选项</h2><p>l -shared ：指定生成动态链接库。</p>
<p>l -static ：指定生成静态链接库。</p>
<p>l -fPIC ：表示编译为位置独立的代码，用于编译共享库。目标文件需要创建成位置无关码，念上就是在可执行程序装载它们的时候，它们可以放在可执行程序的内存里的任何地方。</p>
<p>l -L. ：表示要连接的库所在的目录。</p>
<p>l -l：指定链接时需要的动态库。编译器查找动态连接库时有隐含的命名规则，即在给出的名字前面加上lib，后面加上.a/.so来确定库的名称。</p>
<p>l -Wall ：生成所有警告信息。</p>
<p>l -ggdb ：此选项将尽可能的生成gdb的可以使用的调试信息。</p>
<p>l -g ：编译器在编译的时候产生调试信息。</p>
<p>l -c ：只激活预处理、编译和汇编,也就是把程序做成目标文件(.o文件)。</p>
<p>l  -Wl,options ：把参数 (options) 传递给链接器 ld 。如果 options 中间有逗号 , 就将 options 分成多个选项 , 然后传递给链接程序。</p>
<p>实际上，Makefile里面包含了很多选项；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">make bebug</span><br><span class="line"></span><br><span class="line">f77  -o bin&#x2F;getdp -Llib -lMain -lParser -lPost -lFunction -lIntegration -lGeoData -lDofData -lNumeric -lSparskit -lDataStr -lm</span><br></pre></td></tr></table></figure>
<p>任务3: 调试debug最基本的 代码：最好先保存</p>
<p> To solve the problem<br>   with scalar potential, type ‘getdp test -pre MagSta_phi -cal -pos phi’<br>   with vector potential, type ‘getdp test -pre MagSta_a -cal -pos a’</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#0  List_Add (liste&#x3D;0xaaaaaac54d10, data&#x3D;0xffffffffef00) at listman.c:59</span><br><span class="line">#1  0x0000aaaaaab3d480 in Geo_ReadFile (GeoData_P&#x3D;0xfffffffff0a0) at GeoData.c:140</span><br><span class="line">#2  0x0000aaaaaab3d12c in Geo_AddGeoData (GeoData_L&#x3D;0xaaaaaac54ce0,</span><br><span class="line">    Name_MshFile&#x3D;0xaaaaaac54cc0 &quot;test.msh&quot;, Name_DefaultMshFile&#x3D;0x0) at GeoData.c:36</span><br><span class="line">#3  0x0000aaaaaaab4ba4 in SolvingAnalyse () at SolvingAnalyse.c:64</span><br><span class="line">#4  0x0000aaaaaaab2684 in main (argc&#x3D;7, argv&#x3D;0xfffffffff638) at Main.c:123</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">(gdb) p      *DofData_P0</span><br><span class="line">$15 &#x3D; &#123;Num &#x3D; 0, ResolutionIndex &#x3D; 0, SystemIndex &#x3D; 0, GeoDataIndex &#x3D; 0,</span><br><span class="line">  FunctionSpaceIndex &#x3D; 0xaaaaaac56610, TimeFunctionIndex &#x3D; 0xaaaaaac562d0,</span><br><span class="line">  Pulsation &#x3D; 0x0, NbrHar &#x3D; 1, Val_Pulsation &#x3D; 0x0, NbrAnyDof &#x3D; 3524, NbrDof &#x3D; 3291,</span><br><span class="line">  DofTree &#x3D; 0x0, DofList &#x3D; 0xaaaaaac56400, SolverDataFileName &#x3D; 0x0, Solutions &#x3D; 0x0,</span><br><span class="line">  CurrentSolution &#x3D; 0xfffff7d227a8 &lt;step4_jumps&gt;, Flag_Init &#x3D; &#123;0, 0, 0, 0&#125;, A &#x3D; &#123;M &#x3D; &#123;</span><br><span class="line">      T &#x3D; -7480, N &#x3D; 65535, changed &#x3D; 18, ILU_Exists &#x3D; 0, notranspose &#x3D; 0, S &#x3D; &#123;</span><br><span class="line">        a &#x3D; 0x2, jptr &#x3D; 0xffffffffdee0, ai &#x3D; 0xffffffffffffffff, ptr &#x3D; 0x0,</span><br><span class="line">        a_rcmk &#x3D; 0x0, ia_rcmk &#x3D; 0x0, ja_rcmk &#x3D; 0x20,</span><br><span class="line">        permr &#x3D; 0xfffff7d224f0 &lt;step4_jumps&gt;, permp &#x3D; 0x2, rpermr &#x3D; 0x20000000a,</span><br><span class="line">        alu &#x3D; 0xffffffffe530, jlu &#x3D; 0x0, ju &#x3D; 0xffffffffe560&#125;, F &#x3D; &#123;LU_Exist &#x3D; 40,</span><br><span class="line">        a &#x3D; 0xffffff8000000019, lu &#x3D; 0x0&#125;&#125;&#125;, Jac &#x3D; &#123;M &#x3D; &#123;T &#x3D; 3024, N &#x3D; 0,</span><br><span class="line">      changed &#x3D; -32, ILU_Exists &#x3D; 0, notranspose &#x3D; -6816, S &#x3D; &#123;a &#x3D; 0x0, jptr &#x3D; 0x0,</span><br><span class="line">        ai &#x3D; 0x0, ptr &#x3D; 0x0, a_rcmk &#x3D; 0x0, ia_rcmk &#x3D; 0xaaaaaaba21e6, ja_rcmk &#x3D; 0x0,</span><br><span class="line">        permr &#x3D; 0x0, permp &#x3D; 0x0, rpermr &#x3D; 0x0, alu &#x3D; 0x0, jlu &#x3D; 0x0, ju &#x3D; 0x0&#125;, F &#x3D; &#123;</span><br><span class="line">        LU_Exist &#x3D; -6816, a &#x3D; 0xffffffffe560, lu &#x3D; 0xffffffffe530&#125;&#125;&#125;, b &#x3D; &#123;N &#x3D; -48,</span><br><span class="line">    V &#x3D; 0x9&#125;, res &#x3D; &#123;N &#x3D; -136941568, V &#x3D; 0xfffff7d69738 &lt;_IO_helper_jumps&gt;&#125;, dx &#x3D; &#123;</span><br><span class="line">    N &#x3D; -1430642207, V &#x3D; 0xfffff7ff7b30&#125;, Solver &#x3D; &#123;Params &#x3D; &#123;Matrix_Format &#x3D; -6816,</span><br><span class="line">      Matrix_Printing &#x3D; 65535, Matrix_Storage &#x3D; 0, Renumbering_Technique &#x3D; 0,</span><br><span class="line">      Preconditioner &#x3D; 0, Preconditioner_Position &#x3D; 0, Nb_Fill &#x3D; 0,</span><br><span class="line">      Dropping_Tolerance &#x3D; 0, Permutation_Tolerance &#x3D; 0, Diagonal_Compensation &#x3D; 0,</span><br><span class="line">      Re_Use_ILU &#x3D; 0, Algorithm &#x3D; 0, Krylov_Size &#x3D; -6896,</span><br><span class="line">      IC_Acceleration &#x3D; 1.3906704797561922e-309, Iterative_Improvement &#x3D; -6776,</span><br><span class="line">      Re_Use_LU &#x3D; 65535, Nb_Iter_Max &#x3D; -134228272,</span><br><span class="line">            changed &#x3D; -1429970624, ILU_Exists &#x3D; 43690, notranspose &#x3D; -138012896, S &#x3D; &#123;</span><br><span class="line">        a &#x3D; 0xaaaaaac46140, jptr &#x3D; 0xd0be3aee64b65f00, ai &#x3D; 0xfffffffff040,</span><br><span class="line">        ptr &#x3D; 0xaaaaaab8db4c &lt;List_Add+56&gt;, a_rcmk &#x3D; 0x1aac54cc0,</span><br><span class="line">        ia_rcmk &#x3D; 0xaaaaaac54ce0, ja_rcmk &#x3D; 0xfffffffff060,</span><br><span class="line">        permr &#x3D; 0xaaaaaab3d140 &lt;Geo_AddGeoData+188&gt;, permp &#x3D; 0xfffffffff0a0,</span><br><span class="line">        rpermr &#x3D; 0xaaaaaac54ce0, alu &#x3D; 0xfffffffff170,</span><br><span class="line">        jlu &#x3D; 0xaaaaaaab4ba4 &lt;SolvingAnalyse+220&gt;, ju &#x3D; 0x1&#125;, F &#x3D; &#123;LU_Exist &#x3D; 0,</span><br><span class="line">        a &#x3D; 0xaaaaaac54cc0, lu &#x3D; 0xaaaaaac54ce0&#125;&#125;&#125;, M3 &#x3D; &#123;M &#x3D; &#123;T &#x3D; 0, N &#x3D; 0,</span><br><span class="line">      changed &#x3D; 0, ILU_Exists &#x3D; 0, notranspose &#x3D; 0, S &#x3D; &#123;a &#x3D; 0xaaaaaac54cc0,</span><br><span class="line">        jptr &#x3D; 0xaaaaaac54d10, ai &#x3D; 0xaaaaaac54d40, ptr &#x3D; 0x0, a_rcmk &#x3D; 0x0,</span><br><span class="line">        ia_rcmk &#x3D; 0xaaaaaac4b4a0, ja_rcmk &#x3D; 0xaaaaaac4b4e0, permr &#x3D; 0x0,</span><br><span class="line">        permp &#x3D; 0xaaaaaac4b520, rpermr &#x3D; 0x0, alu &#x3D; 0x0, jlu &#x3D; 0xfffffffff120,</span><br><span class="line">        ju &#x3D; 0xaaaaaab8e178 &lt;List_ISearchSeq+112&gt;&#125;, F &#x3D; &#123;LU_Exist &#x3D; -1429926192,</span><br><span class="line">        a &#x3D; 0xaaaaaac50ea0, lu &#x3D; 0xfffffffff170&#125;&#125;&#125;, m1 &#x3D; &#123;N &#x3D; -1431614456,</span><br><span class="line">    V &#x3D; 0xfffffffff170&#125;, m2 &#x3D; &#123;N &#x3D; -1431258940, V &#x3D; 0xfffffffff889&#125;, m3 &#x3D; &#123;</span><br><span class="line">    N &#x3D; -1429926240, V &#x3D; 0xf7ff9fc0&#125;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$32 &#x3D; &#123;Num &#x3D; 0, Name &#x3D; 0xaaaaaac54cc0 &quot;test.msh&quot;, Nodes &#x3D; 0xaaaaaac54d10,</span><br><span class="line">  Elements &#x3D; 0xaaaaaac54d40, NbrElementsWithEdges &#x3D; 0, NbrElementsWithFacets &#x3D; 0,</span><br><span class="line">  NumCurrentEdge &#x3D; 0, NumCurrentFacet &#x3D; 0, EdgesXNodes &#x3D; 0xaaaaaac4b4a0,</span><br><span class="line">  FacetsXEdges &#x3D; 0xaaaaaac4b4e0, NodesXElements &#x3D; 0x0, Normals &#x3D; 0xaaaaaac4b520,</span><br><span class="line">  GroupForPRE &#x3D; 0x0, Grid &#x3D; &#123;Init &#x3D; 0, Nx &#x3D; 0, Ny &#x3D; -3792, Nz &#x3D; 65535,</span><br><span class="line">    Xmin &#x3D; 9.2711411613790676e-310, Xmax &#x3D; 1.3906711615482659e-309,</span><br><span class="line">    Ymin &#x3D; 9.271141123040364e-310, Ymax &#x3D; 2.1219957909652723e-314,</span><br><span class="line">    Zmin &#x3D; 9.2711411633505872e-310, Zmax &#x3D; 1.3906711615485821e-309,</span><br><span class="line">    ListAll &#x3D; 0xaaaaaaab4b84 &lt;SolvingAnalyse+188&gt;, List1D &#x3D; 0xb8aab90640,</span><br><span class="line">    List2D &#x3D; 0x100000005, List3D &#x3D; 0xfffff7ff9fc0&#125;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(gdb) p Problem_S</span><br><span class="line">$34 &#x3D; &#123;Group &#x3D; 0xaaaaaac4c180, Expression &#x3D; 0xaaaaaac4d570,</span><br><span class="line">  FunctionSpace &#x3D; 0xaaaaaac4fa70, Constraint &#x3D; 0xaaaaaac4ed60,</span><br><span class="line">  Formulation &#x3D; 0xaaaaaac500a0, JacobianMethod &#x3D; 0xaaaaaac4f4c0,</span><br><span class="line">  IntegrationMethod &#x3D; 0xaaaaaac4f660, Resolution &#x3D; 0xaaaaaac50ea0,</span><br><span class="line">  PostProcessing &#x3D; 0xaaaaaac51250, PostOperation &#x3D; 0xaaaaaac547c0&#125;n</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(gdb) where</span><br><span class="line">#0  Treatment_Resolution (ResolutionIndex&#x3D;0, Nbr_DefineSystem&#x3D;0xfffffffff1a0,</span><br><span class="line">    Nbr_OtherSystem&#x3D;0xfffffffff1a8, Resolution_P&#x3D;0xfffffffff1d0,</span><br><span class="line">    DefineSystem_P0&#x3D;0xfffffffff1e0, DofData_P0&#x3D;0xfffffffff1f8,</span><br><span class="line">    DofData_L&#x3D;0xfffffffff208, GeoData_L&#x3D;0xaaaaaac54ce0, GeoData_P0&#x3D;0xfffffffff1f0)</span><br><span class="line">    at SolvingAnalyse.c:460</span><br><span class="line">#1  0x0000aaaaaaab4d08 in SolvingAnalyse () at SolvingAnalyse.c:91</span><br><span class="line">#2  0x0000aaaaaaab2684 in main (argc&#x3D;7, argv&#x3D;0xfffffffff638) at Main.c:123</span><br></pre></td></tr></table></figure>
<p>getdp test -pre MagSta_phi -cal -pos phi</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">b Get_Geometry.c:47</span><br><span class="line">b Cal_GalerkinTermOfFemEquation.c:298</span><br><span class="line">b Treatment_Formulation.c:298</span><br><span class="line">b Treatment_Formulation.c:26</span><br><span class="line">b SolvingOperations.c:923</span><br><span class="line">b SolvingOperations.c:164</span><br><span class="line">b SolvingAnalyse.c:313</span><br><span class="line">b Main.c:123</span><br></pre></td></tr></table></figure>
<p>遇到的困难：程序太复杂，且没有注释，集成化太高。</p>
<p>ADCME:ubuntu install</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">  Building ADCME ─→ &#96;~&#x2F;.julia&#x2F;packages&#x2F;ADCME&#x2F;hCmEo&#x2F;deps&#x2F;build.log&#96;</span><br><span class="line">┌ Error: Error building &#96;ADCME&#96;:</span><br><span class="line">│ ┌ Warning: Pkg.installed() is deprecated</span><br><span class="line">│ └ @ Pkg &#x2F;build&#x2F;julia-eJ3yiP&#x2F;julia-1.4.1+dfsg&#x2F;usr&#x2F;share&#x2F;julia&#x2F;stdlib&#x2F;v1.4&#x2F;Pkg&#x2F;src&#x2F;Pkg.jl:531</span><br><span class="line">│ ┌ Warning: Pkg.installed() is deprecated</span><br><span class="line">│ └ @ Pkg &#x2F;build&#x2F;julia-eJ3yiP&#x2F;julia-1.4.1+dfsg&#x2F;usr&#x2F;share&#x2F;julia&#x2F;stdlib&#x2F;v1.4&#x2F;Pkg&#x2F;src&#x2F;Pkg.jl:531</span><br><span class="line">│ [ Info: Your Julia version is 1.4.1, current ADCME version is 0.6.7, ADCME dependencies installation path: &#x2F;root&#x2F;.julia&#x2F;adcme</span><br><span class="line">│ [ Info:  --------------- (1&#x2F;6) Install Tensorflow Dependencies  ---------------</span><br><span class="line">│ [ Info: ADCME dependencies have already been installed.</span><br><span class="line">│ ERROR: LoadError: LoadError: IOError: could not spawn &#96;&#x2F;root&#x2F;.julia&#x2F;adcme&#x2F;bin&#x2F;conda list&#96;: no such file or directory (ENOENT)</span><br><span class="line">│ Stacktrace:</span><br><span class="line">│  [1] _spawn_primitive(::String, ::Cmd, ::Array&#123;Any,1&#125;) at .&#x2F;process.jl:99</span><br><span class="line">│  [2] #550 at .&#x2F;process.jl:112 [inlined]</span><br><span class="line">│  [3] setup_stdios(::Base.var&quot;#550#551&quot;&#123;Cmd&#125;, ::Array&#123;Any,1&#125;) at .&#x2F;process.jl:196</span><br><span class="line">│  [4] _spawn at .&#x2F;process.jl:111 [inlined]</span><br><span class="line">│  [5] open(::Cmd, ::Base.DevNull; write::Bool, read::Bool) at .&#x2F;process.jl:370</span><br><span class="line">│  [6] open at .&#x2F;process.jl:361 [inlined]</span><br><span class="line">│  [7] open(::Cmd, ::String, ::Base.DevNull) at .&#x2F;process.jl:341</span><br><span class="line">│  [8] read(::Cmd) at .&#x2F;process.jl:410</span><br><span class="line">│  [9] read(::Cmd, ::Type&#123;String&#125;) at .&#x2F;process.jl:421</span><br><span class="line">│  [10] install_conda_envs() at &#x2F;root&#x2F;.julia&#x2F;packages&#x2F;ADCME&#x2F;hCmEo&#x2F;deps&#x2F;install_adcme.jl:71</span><br><span class="line">│  [11] top-level scope at &#x2F;root&#x2F;.julia&#x2F;packages&#x2F;ADCME&#x2F;hCmEo&#x2F;deps&#x2F;install_adcme.jl:81</span><br><span class="line">│  [12] include(::String) at .&#x2F;client.jl:439</span><br><span class="line">│  [13] top-level scope at &#x2F;root&#x2F;.julia&#x2F;packages&#x2F;ADCME&#x2F;hCmEo&#x2F;deps&#x2F;build.jl:55</span><br><span class="line">│  [14] include(::String) at .&#x2F;client.jl:439</span><br><span class="line">│  [15] top-level scope at none:5</span><br><span class="line">│ in expression starting at &#x2F;root&#x2F;.julia&#x2F;packages&#x2F;ADCME&#x2F;hCmEo&#x2F;deps&#x2F;install_adcme.jl:81</span><br><span class="line">│ in expression starting at &#x2F;root&#x2F;.julia&#x2F;packages&#x2F;ADCME&#x2F;hCmEo&#x2F;deps&#x2F;build.jl:55</span><br><span class="line">└ @ Pkg.Operations &#x2F;build&#x2F;julia-eJ3yiP&#x2F;julia-1.4.1+dfsg&#x2F;usr&#x2F;share&#x2F;julia&#x2F;stdlib&#x2F;v1.4&#x2F;Pkg&#x2F;src&#x2F;Operations.jl:892</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">CONDA &#x3D; &quot;&quot;</span><br><span class="line">if Sys.iswindows()</span><br><span class="line">    CONDA &#x3D; &quot;$(JULIA_ADCME_DIR)&#x2F;.julia&#x2F;adcme&#x2F;Scripts&#x2F;conda.exe&quot;</span><br><span class="line">else</span><br><span class="line">    CONDA &#x3D; &quot;$(JULIA_ADCME_DIR)&#x2F;.julia&#x2F;adcme&#x2F;bin&#x2F;conda&quot;</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">INSTALLER &#x3D; &quot;&quot;</span><br><span class="line">if Sys.islinux()</span><br><span class="line">    INSTALLER &#x3D; &quot;Miniconda3-py37_4.8.3-Linux-x86_64.sh&quot;</span><br><span class="line">elseif Sys.isapple()</span><br><span class="line">    INSTALLER &#x3D; &quot;Miniconda3-py37_4.8.3-MacOSX-x86_64.sh&quot;</span><br><span class="line">else</span><br><span class="line">    INSTALLER &#x3D; &quot;Miniconda3-py37_4.8.3-Windows-x86_64.exe&quot;</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<!-- flag of hidden posts --></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Jiaqi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://deal-ii.com/post/d7abca24/">http://deal-ii.com/post/d7abca24/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://deal-ii.com" target="_blank">DEAL-II-Fluid</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/FEM/">FEM</a><a class="post-meta__tags" href="/tags/acoustic/">acoustic</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/03/30/ULzlsMHcmNjKaQt.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/post/ac853f89/" title="deal-ii-learning"><img class="relatedPosts_cover" data-src="https://cdn.jsdelivr.net/gh/Jiaqi-knight/imgBase@main/cover-dealii69.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-26</div><div class="relatedPosts_title">deal-ii-learning</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headling"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div class="comments-items-1" data-name="Valine"><div class="vcomment" id="vcomment"></div><script>function loadvaline () {  
  var requestSetting = function (from,set) {
    var from = from
    var setting = set.split(',').filter(function(item){
    return from.indexOf(item) > -1
    });
    setting = setting.length == 0 ? from :setting;
    return setting
  }

  var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
  var requiredFields = requestSetting(['nick','mail'],'nick,mail')

  function initValine () {
    window.valine = new Valine({
      el:'#vcomment',
      appId: 'lJ3vEzEWaeVa6HpWNNbPrauw-gzGzoHsz',
      appKey: '16FI6zgDXwvw71g04yhHnnW0',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: guestInfo,
      pageSize: '10',
      lang: 'en',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      requiredFields: requiredFields
    });
  }
  loadScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || false) {
  window.addEventListener('load', loadvaline)
}
else {
  function loadOtherComment () {
    loadvaline()
  }
}</script></div></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021  <i id="heartbeat" class="fa fas fa-heartbeat"></i> Jiaqi</div><div class="framework-info"><span>驱动 </span><a target="_blank" rel="noopener" href="https://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div><head><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></head></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/calendar.js"></script><script src="/js/languages.js"></script><script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script><script src="/gitcalendar/js/gitcalendar.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":120,"height":260},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>